# ğŸš€ SmurfChat - á»¨ng dá»¥ng Chat Thá»i Gian Thá»±c

<div align="center">
  <img src="public/gui.png" alt="SmurfChat Demo" width="800"/>
  
  *Giao diá»‡n chÃ­nh cá»§a á»©ng dá»¥ng SmurfChat*
</div>

## ğŸ‘¥ NhÃ³m Thá»±c Hiá»‡n

**TrÆ°á»ng:** Äáº¡i há»c CÃ´ng ThÆ°Æ¡ng TP.HCM  
**Khoa:** CÃ´ng Nghá»‡ ThÃ´ng Tin  
**ThÃ nh viÃªn:**

- **Tráº§n CÃ´ng Minh**
- **LÃª Äá»©c Trung**
- **Nguyá»…n ChÃ­ TÃ i**
- **Táº¡ NguyÃªn VÅ©**

---

## ğŸ“‹ Giá»›i Thiá»‡u Dá»± Ãn

SmurfChat lÃ  má»™t á»©ng dá»¥ng chat thá»i gian thá»±c hiá»‡n Ä‘áº¡i Ä‘Æ°á»£c xÃ¢y dá»±ng vá»›i React vÃ  Firebase. á»¨ng dá»¥ng cung cáº¥p tráº£i nghiá»‡m chat mÆ°á»£t mÃ  vá»›i nhiá»u tÃ­nh nÄƒng thÃ´ng minh nhÆ° quáº£n lÃ½ phÃ²ng chat, tin nháº¯n trá»±c tiáº¿p, chia sáº» file, ghi Ã¢m giá»ng nÃ³i vÃ  há»‡ thá»‘ng káº¿t báº¡n.

## âœ¨ TÃ­nh NÄƒng ChÃ­nh

### ğŸ” XÃ¡c Thá»±c & Báº£o Máº­t

- ÄÄƒng kÃ½/ÄÄƒng nháº­p báº±ng Email vÃ  Password
- XÃ¡c thá»±c ngÆ°á»i dÃ¹ng vá»›i Firebase Authentication
- Báº£o máº­t dá»¯ liá»‡u vá»›i Firestore Security Rules

### ğŸ’¬ Chat & Nháº¯n Tin

- **Chat thá»i gian thá»±c** vá»›i WebSocket
- **Tin nháº¯n nhÃ³m** trong phÃ²ng chat
- **Tin nháº¯n trá»±c tiáº¿p** (Direct Messages) 1-1
- **Thu há»“i tin nháº¯n** trong vÃ²ng 10 phÃºt
- **ÄÃ¡nh dáº¥u Ä‘Ã£ Ä‘á»c** vÃ  tráº¡ng thÃ¡i online
- **Emoji picker** vá»›i há»— trá»£ Unicode Ä‘áº§y Ä‘á»§
- **Quick reactions** cho tin nháº¯n

### ğŸ  Quáº£n LÃ½ PhÃ²ng Chat

- Táº¡o vÃ  quáº£n lÃ½ phÃ²ng chat
- Má»i thÃ nh viÃªn vÃ o phÃ²ng
- PhÃ¢n quyá»n admin vÃ  thÃ nh viÃªn
- **Chuyá»ƒn quyá»n admin** cho thÃ nh viÃªn khÃ¡c
- **Rá»i khá»i phÃ²ng** hoáº·c **giáº£i tÃ¡n phÃ²ng**
- **Upload avatar nhÃ³m**
- **Ghim cuá»™c trÃ² chuyá»‡n** quan trá»ng

### ï¿½ Há»‡ Thá»‘ng Káº¿t Báº¡n

- Gá»­i lá»i má»i káº¿t báº¡n
- Cháº¥p nháº­n/Tá»« chá»‘i lá»i má»i
- Quáº£n lÃ½ danh sÃ¡ch báº¡n bÃ¨
- TÃ¬m kiáº¿m ngÆ°á»i dÃ¹ng theo tÃªn

### ğŸ“ Chia Sáº» File & Media

- **Upload file** vá»›i Supabase Storage
- **Chia sáº» hÃ¬nh áº£nh** vá»›i preview
- **Ghi Ã¢m vÃ  gá»­i tin nháº¯n thoáº¡i**
- **Chia sáº» vá»‹ trÃ­** vá»›i Google Maps
- **Chá»¥p áº£nh trá»±c tiáº¿p** tá»« camera

### ğŸ¨ Giao Diá»‡n & Tráº£i Nghiá»‡m

- **Dark/Light Mode** vá»›i theme switcher
- **Responsive design** cho má»i thiáº¿t bá»‹
- **Real-time typing indicators**
- **Push notifications** cho tin nháº¯n má»›i
- **Infinite scroll** cho lá»‹ch sá»­ chat

## ğŸ› ï¸ CÃ´ng Nghá»‡ Sá»­ Dá»¥ng

### Frontend

- **React 17** - UI Framework
- **React Router DOM** - Client-side routing
- **React Icons** - Icon library
- **Tailwind CSS** - Utility-first CSS framework
- **date-fns** - Date manipulation library
- **emoji-picker-react** - Emoji selection component
- **Lodash** - JavaScript utility library

### Backend & Database

- **Firebase 9**
  - Firestore Database (NoSQL)
  - Firebase Authentication
  - Real-time listeners
- **Supabase Storage** - File storage solution

### Build Tools & Development

- **Create React App 5** - Development environment
- **PostCSS & Autoprefixer** - CSS processing
- **React Scripts** - Build and development scripts

## ğŸš€ HÆ°á»›ng Dáº«n CÃ i Äáº·t

### YÃªu Cáº§u Há»‡ Thá»‘ng

- **Node.js** 14.0 trá»Ÿ lÃªn
- **npm** hoáº·c **yarn** package manager
- **Git** Ä‘á»ƒ clone repository

### BÆ°á»›c 1: Clone Dá»± Ãn

```bash
git clone https://github.com/dexter826/SmurfChat.git
cd SmurfChat
```

### BÆ°á»›c 2: CÃ i Äáº·t Dependencies

```bash
npm install
# hoáº·c
yarn install
```

### BÆ°á»›c 3: Cáº¥u HÃ¬nh Environment Variables

Táº¡o file `.env` trong thÆ° má»¥c root vá»›i ná»™i dung:

```env
# Firebase Configuration
REACT_APP_FIREBASE_API_KEY=your_firebase_api_key
REACT_APP_FIREBASE_AUTH_DOMAIN=your_project.firebaseapp.com
REACT_APP_FIREBASE_PROJECT_ID=your_project_id
REACT_APP_FIREBASE_STORAGE_BUCKET=your_project.appspot.com
REACT_APP_FIREBASE_MESSAGING_SENDER_ID=your_sender_id
REACT_APP_FIREBASE_APP_ID=your_app_id
REACT_APP_FIREBASE_MEASUREMENT_ID=your_measurement_id

# Supabase Configuration (for file storage)
REACT_APP_SUPABASE_URL=your_supabase_url
REACT_APP_SUPABASE_ANON_KEY=your_supabase_anon_key
```

### BÆ°á»›c 4: Thiáº¿t Láº­p Firebase

1. **Táº¡o Firebase Project:**

   - Truy cáº­p [Firebase Console](https://console.firebase.google.com/)
   - Táº¡o project má»›i
   - ThÃªm web app vÃ o project

2. **Cáº¥u hÃ¬nh Authentication:**

   - Báº­t **Email/Password** authentication
   - Thiáº¿t láº­p authorized domains náº¿u cáº§n

3. **Thiáº¿t láº­p Firestore Database:**
   - Táº¡o Firestore database á»Ÿ cháº¿ Ä‘á»™ production
   - Cáº¥u hÃ¬nh Security Rules:

```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // Users can read/write their own data
    match /users/{userId} {
      allow read, write: if request.auth != null && request.auth.uid == userId;
      allow read: if request.auth != null; // Allow reading other users for search
    }

    // Room members can read/write messages
    match /messages/{messageId} {
      allow read, write: if request.auth != null &&
        request.auth.uid in resource.data.roomMembers;
    }

    // Room management
    match /rooms/{roomId} {
      allow read, write: if request.auth != null &&
        request.auth.uid in resource.data.members;
    }

    // Direct messages
    match /directMessages/{messageId} {
      allow read, write: if request.auth != null;
    }

    // Conversations
    match /conversations/{conversationId} {
      allow read, write: if request.auth != null &&
        request.auth.uid in resource.data.participants;
    }

    // Friend system
    match /friends/{friendId} {
      allow read, write: if request.auth != null;
    }

    match /friend_requests/{requestId} {
      allow read, write: if request.auth != null;
    }


    match /votes/{voteId} {
      allow read, write: if request.auth != null;
    }
  }
}
```

### BÆ°á»›c 5: Thiáº¿t Láº­p Supabase Storage

1. **Táº¡o Supabase Project:**

   - Truy cáº­p [Supabase](https://supabase.com/)
   - Táº¡o project má»›i

2. **Cáº¥u hÃ¬nh Storage:**
   - Táº¡o bucket cÃ³ tÃªn `chat-files`
   - Thiáº¿t láº­p public access policies

### BÆ°á»›c 6: Cháº¡y á»¨ng Dá»¥ng

```bash
npm start
# hoáº·c
yarn start
```

á»¨ng dá»¥ng sáº½ cháº¡y táº¡i `http://localhost:3000`

### BÆ°á»›c 7: Build cho Production

```bash
npm run build
# hoáº·c
yarn build
```

## ğŸ“ Cáº¥u TrÃºc Dá»± Ãn

```
SmurfChat/
â”œâ”€â”€ public/                     # Static files
â”‚   â”œâ”€â”€ index.html             # HTML template
â”‚   â”œâ”€â”€ manifest.json          # PWA manifest
â”‚   â”œâ”€â”€ gui.png               # Demo screenshot
â”‚   â””â”€â”€ sounds/               # Audio files
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/           # React components
â”‚   â”‚   â”œâ”€â”€ ChatRoom/        # Chat related components
â”‚   â”‚   â”‚   â”œâ”€â”€ ChatWindow.jsx      # Main chat interface
â”‚   â”‚   â”‚   â”œâ”€â”€ ConversationWindow.jsx  # Direct message interface
â”‚   â”‚   â”‚   â”œâ”€â”€ Message.jsx         # Message component
â”‚   â”‚   â”‚   â”œâ”€â”€ RoomList.jsx        # Room list sidebar
â”‚   â”‚   â”‚   â”œâ”€â”€ UnifiedChatList.jsx # Unified chat list
â”‚   â”‚   â”‚   â”œâ”€â”€ UserInfo.jsx        # User profile info
â”‚   â”‚   â”‚   â”œâ”€â”€ EmojiPicker.jsx     # Emoji selection
â”‚   â”‚   â”‚   â””â”€â”€ VoteMessage.jsx     # Vote/Poll messages
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ Login/           # Authentication
â”‚   â”‚   â”‚   â”œâ”€â”€ index.jsx           # Login form
â”‚   â”‚   â”‚   â””â”€â”€ Register.jsx        # Registration form
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ Modals/          # Modal dialogs
â”‚   â”‚   â”‚   â”œâ”€â”€ AddRoomModal.jsx    # Create room modal
â”‚   â”‚   â”‚   â”œâ”€â”€ InviteMemberModal.jsx # Invite users modal
â”‚   â”‚   â”‚   â”œâ”€â”€ AddFriendModal.jsx  # Add friend modal
â”‚   â”‚   â”‚   â”œâ”€â”€ CalendarModal.jsx   # Calendar view modal
â”‚   â”‚   â”‚   â”œâ”€â”€ VoteModal.jsx       # Vote creation modal
â”‚   â”‚   â”‚   â””â”€â”€ NewMessageModal.jsx # New message modal
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ FileUpload/      # File handling
â”‚   â”‚   â”‚   â”œâ”€â”€ FileUpload.jsx      # File upload component
â”‚   â”‚   â”‚   â”œâ”€â”€ FilePreview.jsx     # File preview
â”‚   â”‚   â”‚   â”œâ”€â”€ VoiceRecording.jsx  # Voice message recording
â”‚   â”‚   â”‚   â””â”€â”€ LocationPreview.jsx # Location sharing
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ Common/          # Shared components
â”‚   â”‚   â”‚   â””â”€â”€ AlertModal.jsx      # Alert notifications
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ Notifications/   # Notification system
â”‚   â”‚
â”‚   â”œâ”€â”€ Context/             # React Context providers
â”‚   â”‚   â”œâ”€â”€ AppProvider.jsx         # App state management
â”‚   â”‚   â”œâ”€â”€ AuthProvider.jsx        # Authentication state
â”‚   â”‚   â”œâ”€â”€ ThemeProvider.jsx       # Theme management
â”‚   â”‚   â””â”€â”€ AlertProvider.jsx       # Alert system
â”‚   â”‚
â”‚   â”œâ”€â”€ firebase/            # Firebase configuration
â”‚   â”‚   â”œâ”€â”€ config.js              # Firebase setup
â”‚   â”‚   â””â”€â”€ services.js            # Firebase services
â”‚   â”‚
â”‚   â”œâ”€â”€ supabase/           # Supabase configuration
â”‚   â”‚   â”œâ”€â”€ config.js             # Supabase setup
â”‚   â”‚   â””â”€â”€ storage.js            # File storage services
â”‚   â”‚
â”‚   â”œâ”€â”€ hooks/              # Custom React hooks
â”‚   â”‚   â”œâ”€â”€ useFirestore.js       # Firestore data hooks
â”‚   â”‚   â”œâ”€â”€ useEmoji.js           # Emoji utilities
â”‚   â”‚   â””â”€â”€ useOnlineStatus.js    # Online status tracking
â”‚   â”‚
â”‚   â”œâ”€â”€ App.jsx             # Main App component
â”‚   â”œâ”€â”€ App.css             # Global styles
â”‚   â”œâ”€â”€ index.js            # App entry point
â”‚   â””â”€â”€ index.css           # Base styles
â”‚
â”œâ”€â”€ build/                  # Production build output
â”œâ”€â”€ package.json           # Dependencies vÃ  scripts
â”œâ”€â”€ tailwind.config.js     # Tailwind CSS configuration
â”œâ”€â”€ postcss.config.js      # PostCSS configuration
â””â”€â”€ firebase.json          # Firebase hosting config
```

## ğŸ”§ Scripts CÃ³ Sáºµn

Trong thÆ° má»¥c dá»± Ã¡n, báº¡n cÃ³ thá»ƒ cháº¡y cÃ¡c lá»‡nh sau:

### `npm start`

Cháº¡y á»©ng dá»¥ng á»Ÿ cháº¿ Ä‘á»™ development.  
Má»Ÿ [http://localhost:3000](http://localhost:3000) Ä‘á»ƒ xem trong browser.

### `npm run build`

Build á»©ng dá»¥ng cho production vÃ o thÆ° má»¥c `build/`.  
Tá»‘i Æ°u hÃ³a build Ä‘á»ƒ cÃ³ hiá»‡u suáº¥t tá»‘t nháº¥t.

### `npm run eject`

**LÆ°u Ã½: ÄÃ¢y lÃ  thao tÃ¡c má»™t chiá»u. Má»™t khi Ä‘Ã£ `eject`, khÃ´ng thá»ƒ quay láº¡i!**

## ğŸŒŸ TÃ­nh NÄƒng Ná»•i Báº­t

### ğŸ”„ Real-time Synchronization

- **WebSocket connections** cho cáº­p nháº­t tá»©c thÃ¬
- **Optimistic updates** cho UX mÆ°á»£t mÃ 
- **Offline support** vá»›i local caching
- **Auto-reconnection** khi máº¥t káº¿t ná»‘i

### ğŸ¯ Smart Features

- **Smart search** vá»›i fuzzy matching
- **Typing indicators** hiá»ƒn thá»‹ ai Ä‘ang gÃµ
- **Message status** (sent, delivered, read)
- **Auto-scroll** Ä‘áº¿n tin nháº¯n má»›i

### ğŸ“± Mobile-First Design

- **Progressive Web App** (PWA) support
- **Touch-friendly** interface
- **Responsive layouts** cho má»i mÃ n hÃ¬nh
- **Native app-like** experience

## ğŸ“Š Database Schema

### Collections trong Firestore:

#### `users`

```javascript
{
  uid: string,
  displayName: string,
  email: string,
  photoURL: string,
  searchVisibility: 'public' | 'friends' | 'private',
  keywords: string[],
  createdAt: timestamp,
  lastSeen: timestamp
}
```

#### `rooms`

```javascript
{
  id: string,
  name: string,
  description: string,
  admin: string, // user uid
  members: string[], // array of user uids
  avatar: string,
  lastMessage: string,
  lastMessageAt: timestamp,
  dissolved: boolean,
  pinned: boolean,
  mutedBy: object // { userId: boolean }
}
```

#### `messages`

```javascript
{
  id: string,
  text: string,
  uid: string,
  displayName: string,
  photoURL: string,
  roomId: string,
  messageType: 'text' | 'file' | 'voice' | 'location',
  fileData: object,
  recalled: boolean,
  readBy: string[],
  createdAt: timestamp
}
```

#### `conversations`

```javascript
{
  id: string,
  participants: string[], // [uid1, uid2]
  lastMessage: string,
  lastMessageAt: timestamp,
  createdAt: timestamp
}
```

#### `friends`

```javascript
{
  id: string,
  participants: string[], // [uid1, uid2] sorted
  createdAt: timestamp
}
```

## ğŸ“„ License

Dá»± Ã¡n nÃ y Ä‘Æ°á»£c phÃ¢n phá»‘i dÆ°á»›i **MIT License**. Xem file `LICENSE` Ä‘á»ƒ biáº¿t thÃªm chi tiáº¿t.

---

<div align="center">
  <strong>ğŸ“ Äá»“ Ã¡n mÃ´n há»c NoSQL - TrÆ°á»ng Äáº¡i há»c CÃ´ng ThÆ°Æ¡ng TP.HCM</strong><br>
  <em>Khoa CÃ´ng Nghá»‡ ThÃ´ng Tin</em>
</div>
